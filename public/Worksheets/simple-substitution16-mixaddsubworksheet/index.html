<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Solve for x – Mixed Addition & Subtraction</title>
  <style>
    /* ===== PRINT & PAGE SETTINGS ===== */
    
        .print-btn {
            background-color: #e67e22;
        }

        .print-btn:hover {
            background-color: #d35400;
        }

        @media print {
      @page {
                size: 8.5in 11in;
                margin: 0.25in;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      .button-container,.generate-btn,.check-btn,
            .print-btn,.static-btn,.save-btn{display:none!important}
      input::placeholder{color:transparent!important;opacity:0!important}
      body{margin:0!important;padding:0.25in!important}
      .problems-grid{page-break-inside:avoid!important}
      .grade-display{position:fixed!important;
                width: 100% !important;
                height: 100% !important;bottom:0.6in!important;left:0;right:0;text-align:center!important}
    }

    /* ===== BASE LAYOUT & FONTS ===== */
    body{
      font-family:'Comic Sans MS',cursive,sans-serif;
      color:#3498db;background:#fff;width:8.5in;margin:0 auto;padding:20px;
                width: 100% !important;
                height: 100% !important;
      box-sizing:border-box;display:flex;flex-direction:column;align-items:center;
      min-height:11in;
    }
    .header{text-align:center;margin-bottom:0.3in}
    .header h1{font-size:26px;margin:0 0 10px;color:#3498db}
    .header .input-row{display:flex;justify-content:center;gap:20px;margin:8px 0}
    .header p{font-size:16px;margin:0;display:flex;align-items:center}
    .header input{
      font-family:'Comic Sans MS',cursive,sans-serif;font-size:16px;border:none;
      border-bottom:1px solid #3498db;outline:none;width:180px;padding:2px 4px;margin:0 5px;
    }
    .header input:focus{border-bottom:2px solid #3498db}

    .example-box{
      text-align:start;margin-bottom:0.3in;padding:10px 18px;border:2px solid #3498db;
      border-radius:8px;background:#f8f9fa;width:7in;
    }
    .example-box h3{margin:0 0 6px;color:#5dbce9}
    .example-box p{margin:4px 0;color:#5dbce9}

    .problems-grid{
      display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(4,auto);
      gap:0.3in;margin:0.3in auto;
                page-break-inside: avoid !important;max-width:7in;width:100%;
    }

    .problem{
      border:1px solid #ccc;padding:0.15in;text-align:center;font-size:20px;width:1.4in;height:1.4in;
      background:#fff;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.1);
      position:relative;box-sizing:border-box;transition:background 0.3s ease;display:flex;
      flex-direction:column;justify-content:center;align-items:center;
    }
    .problem.correct{background:#d4edda}
    .problem.incorrect{background:#f8d7da}
    .problem::before{
      content:attr(data-number);position:absolute;top:-6px;left:-2px;background:#fff;color:#999;
      font-size:9px;padding:1px 4px;border-radius:3px;border:1px solid #eee;
    }
    .problem.correct::before{border-color:#28a745;color:#28a745}
    .problem.incorrect::before{border-color:#dc3545;color:#dc3545}

    .equation{margin-top:0.05in;margin-bottom:0.1in;font-family:'Comic Sans MS',cursive;font-size:20px;color:#3498db}
    .answer-line{display:flex;align-items:center;gap:4px;font-size:18px}
    .answer-line input{
      width:60px;height:38px;font-size:20px;border:2px solid #fdc9ec;border-radius:4px;
      background:#ffeaf8;text-align:center;font-family:'Comic Sans MS',cursive;
      appearance:textfield;-moz-appearance:textfield;
    }

    /* ===== BUTTONS & GRADING ===== */
    .button-container{display:flex;gap:10px;margin-top:20px;justify-content:center}
    .btn{padding:12px 24px;font-size:16px;color:#fff;border:none;border-radius:6px;cursor:pointer;
      font-family:'Comic Sans MS',cursive;transition:background 0.2s ease;}
    .generate-btn{background:#2ecc71}.generate-btn:hover{background:#27ae60}
    .check-btn{background:#3498db}.check-btn:hover{background:#2980b9}
    .static-btn{background:#9b59b6}.static-btn:hover{background:#8e44ad}
    .save-btn{background:#e67e22}.save-btn:hover{background:#d35400}

    .grade-display{margin-top:20px;font-size:18px;text-align:center}
    .grade-display.correct{color:#2ecc71}
    .grade-display.incorrect{color:#e74c3c}

    /* Add the worksheet number styling */
    .worksheet-number {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <div id="worksheetNumber" class="worksheet-number"></div>
  <div class="header">
    <h1>Solve for <em>x</em> – Mixed Addition & Subtraction</h1>
    <div class="input-row">
      <p>Name: <input type="text" id="studentName" placeholder="Enter your name"></p>
      <p>Date: <input type="text" id="date" placeholder="MM/DD/YYYY"></p>
    </div>
  </div>

  <div class="example-box">
    <h3>Examples:</h3>
    <p>Addition: x + 5 = 7 &nbsp;&nbsp;→&nbsp;&nbsp; 7 - 5 = 2 &nbsp;&nbsp;→&nbsp;&nbsp; x = 2</p>
    <p>Subtraction: x - 3 = 4 &nbsp;&nbsp;→&nbsp;&nbsp; 4 + 3 = 7 &nbsp;&nbsp;→&nbsp;&nbsp; x = 7</p>
    <p>For addition, subtract the number from both sides. For subtraction, add the number to both sides!</p>
  </div>

  <div class="problems-grid" id="problemsGrid"></div>

  <div class="button-container">
    <button class="btn generate-btn" onclick="generateProblems()">Generate New Problems</button>
    <button class="btn check-btn" onclick="checkAnswers()">Check Answers</button>
        <button class="btn print-btn" onclick="window.print()">Print</button>
  </div>

  <div class="grade-display" id="gradeDisplay"></div>

<script>
  const rnd=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;

  function makeEquation(isAddition){
    if (isAddition) {
      // For addition: x + a = b, where b must be positive
      const x = rnd(1,15);
      const a = rnd(1,9);
      const b = x + a;
      return {equation:`x + ${a} = ${b}`, answer:x};
    } else {
      // For subtraction: x - a = b, where b must be positive
      // To ensure b is positive, x must be greater than a
      const a = rnd(1,9);
      const b = rnd(1,9);  // b will be the positive result
      const x = a + b;     // x is calculated to ensure positive b
      return {equation:`x - ${a} = ${b}`, answer:x};
    }
  }

  function generateProblems(){
    const grid=document.getElementById('problemsGrid');
    grid.innerHTML='';
    
    // Create arrays for addition and subtraction problems
    const additionProblems = [];
    const subtractionProblems = [];
    
    // Generate 8 of each type
    for(let i=0; i<8; i++) {
      additionProblems.push(makeEquation(true));
      subtractionProblems.push(makeEquation(false));
    }
    
    // Combine and shuffle the problems
    const allProblems = [...additionProblems, ...subtractionProblems];
    for(let i = allProblems.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [allProblems[i], allProblems[j]] = [allProblems[j], allProblems[i]];
    }
    
    // Display the problems
    allProblems.forEach(({equation,answer},i)=>{
      const div=document.createElement('div');
      div.className='problem';
      div.setAttribute('data-number',i+1);
      div.setAttribute('data-answer',answer);
      div.innerHTML=`
        <div class="equation">${equation}</div>
        <div class="answer-line">x&nbsp;=&nbsp;<input type="number" step="1" min="0" max="20"></div>`;
      grid.appendChild(div);
    });
    document.getElementById('gradeDisplay').textContent='';
  }

  function generateStaticProblems(){
    const staticSet=[
      {eq:'x + 3 = 9',ans:6},{eq:'x - 4 = 8',ans:12},{eq:'x + 5 = 10',ans:5},
      {eq:'x - 6 = 12',ans:18},{eq:'x + 7 = 14',ans:7},
      {eq:'x - 8 = 16',ans:24},{eq:'x + 9 = 18',ans:9},{eq:'x - 2 = 7',ans:9},
      {eq:'x + 3 = 10',ans:7},{eq:'x - 4 = 11',ans:15},{eq:'x + 5 = 12',ans:7},
      {eq:'x - 6 = 13',ans:19},{eq:'x + 7 = 14',ans:7},{eq:'x - 8 = 15',ans:23},
      {eq:'x + 9 = 16',ans:7},{eq:'x - 2 = 9',ans:11}
    ];
    // Shuffle the static set
    for(let i = staticSet.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [staticSet[i], staticSet[j]] = [staticSet[j], staticSet[i]];
    }
    
    const grid=document.getElementById('problemsGrid');
    grid.innerHTML='';
    staticSet.forEach(({eq,ans},i)=>{
      const div=document.createElement('div');
      div.className='problem';
      div.setAttribute('data-number',i+1);
      div.setAttribute('data-answer',ans);
      div.innerHTML=`
        <div class="equation">${eq}</div>
        <div class="answer-line">x&nbsp;=&nbsp;<input type="number" step="1" min="0" max="20"></div>`;
      grid.appendChild(div);
    });
    document.getElementById('gradeDisplay').textContent='';
  }

  function checkAnswers(){
    const problems=document.querySelectorAll('.problem');
    let correct=0;
    problems.forEach(p=>{
      const input=p.querySelector('input');
      const ans=parseInt(p.getAttribute('data-answer'));
      const user=parseInt(input.value);
      if(user===ans){
        p.classList.add('correct');
        p.classList.remove('incorrect');
        correct++;
      } else {
        p.classList.add('incorrect');
        p.classList.remove('correct');
        // Show correct answer in red
        const answerLine = p.querySelector('.answer-line');
        const correctAnswer = document.createElement('span');
        correctAnswer.style.color = '#dc3545';
        correctAnswer.style.marginLeft = '5px';
        correctAnswer.textContent = ans;
        // Remove any existing correct answer
        const existingAnswer = answerLine.querySelector('span');
        if (existingAnswer) {
          existingAnswer.remove();
        }
        answerLine.appendChild(correctAnswer);
      }
    });
    const perc=Math.round((correct/problems.length)*100);
    const gd=document.getElementById('gradeDisplay');
    gd.textContent=`Score: ${correct}/${problems.length} (${perc}%)`;
    gd.className='grade-display '+(perc>=70?'correct':'incorrect');
  }

  function saveWorksheet(){
    const name=document.getElementById('studentName').value||'Anonymous';
    const date=document.getElementById('date').value||new Date().toLocaleDateString();
    document.getElementById('studentName').value=name;
    document.getElementById('date').value=date;
    window.print();
  }

  function generateWorksheetNumber() {
    const now = new Date();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const year = now.getFullYear();
    const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
    return `WS-${month}${day}${year}-${random}`;
  }

  function generateNewWorksheet() {
    // Update worksheet number
    document.getElementById('worksheetNumber').textContent = generateWorksheetNumber();
    
    currentProblems = [];
    generateProblems();
  }

  generateNewWorksheet();
</script>
</body>
</html> 